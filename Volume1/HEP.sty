%\RequirePackage{times}  %,mathptm} %<<<<!!!
%\RequirePackage{avant}
\RequirePackage{dtklogos}
\RequirePackage{amsmath,amsthm,amssymb,amsxtra}  %<<<
\RequirePackage{ifthen}
\RequirePackage{calc}
\RequirePackage{array}
\RequirePackage{epsfig,epsf,rotating}
\RequirePackage{fancyheadings}
\RequirePackage{titlesec}
\RequirePackage[strict]{changepage}
\RequirePackage{bm}
\RequirePackage{picins}
\RequirePackage[footnotesize]{caption2}
\RequirePackage{makeidx}
%\RequirePackage{fancyhdr}
\RequirePackage{etoolbox}
\RequirePackage{color}
\definecolor{EWOMgray}{gray}{.6}
\definecolor{textboxgray}{gray}{.9}
\definecolor{textboxwhite}{gray}{1}
\setlength{\voffset}{0mm}%       2
\setlength{\topmargin}{0mm}%       4
\setlength{\textwidth}{125mm}%      8
\setlength{\textheight}{192mm}%     7
\setlength{\topskip}{0mm}%
\setlength{\parindent}{0pt}%
\setlength{\parskip}{1pt}%段间
\setlength{\headheight}{12pt}% 5
\setlength{\headsep}{6mm}% 6
\newlength{\headlinerulewidth}%
\setlength{\headlinerulewidth}{2mm}%  <<<<
\newlength{\headlineruleraise}%
\setlength{\headlineruleraise}{0mm}%
\newlength{\headlinerulesep}%
\setlength{\headlinerulesep}{0mm}%
\newlength{\headlinesep}%
\setlength{\headlinesep}{34mm}% <<< statt 34 mm
\newlength{\thmrule}%
\setlength{\thmrule}{2mm}%  <<<<<<<< statt 2 mm
\newlength{\thmwidth}%
\setlength{\thmwidth}{\textwidth - 5\thmrule}%
%\newlength{\thmheight}%
\newlength{\boxrule}%
\setlength{\boxrule}{0.5pt}%  <<<< statt .4, was zu schmal ist.
\newlength{\boxwidth}%
\setlength{\boxwidth}{\textwidth - 2\boxrule - 4 \thmrule}%
\newlength{\partpageheight}%
\setlength{\partpageheight}{\textheight - \headlinesep}%
\newcommand{\headlinerule}{%
}%
\setlength{\oddsidemargin}{(\paperwidth - \textwidth - \marginparwidth -
  \marginparsep -  (1in + \hoffset) * 2)/2}
\setlength{\evensidemargin}{\paperwidth - (1in + \hoffset) * 2
   - \oddsidemargin - \textwidth}
\pagestyle{fancyplain}
\addtolength{\headheight}{3pt}
\newcommand{\pushout}{\raggedleft}%
\newcommand{\pushin}{\raggedright}%

\lhead[\fancyplain{\headlinerule}{{\small$\cdot$~\thepage~$\cdot$}}]{\small\hspace*{-3mm}\fancyplain{\headlinerule}{}\hspace*{\fill}}
%\lhead[\fancyplain{\headlinerule}{\footnotesize$\cdot$~\thepage~$\cdot$}]{\hspace*{-3mm}\fancyplain{\headlinerule}{}}
\chead[\hspace*{\fill}{\bf\footnotesize\leftmark}\hspace*{\fill}]{\hspace*{\fill}{\bf\footnotesize\rightmark}\hspace*{\fill}}
\rhead[\fancyplain{\headlinerule}{}]{\hspace*{\fill}\small\hspace*{-3mm}\fancyplain{\headlinerule}{}}%
\rhead[\fancyplain{\headlinerule}{}]{\hspace*{-3mm}\fancyplain{\headlinerule}{\small$\cdot$~\thepage~$\cdot$}}%
\cfoot{\fancyplain{}{}}     %书眉
% \fancyfoot[EL,OR]{\vspace{-1mm}\liuhaa \thepage} %页码\fancyhf{}
%%
\renewcommand\part{%
  \if@openright
    \cleardoublepage
  \else
    \clearpage
  \fi
  \thispagestyle{plain}%
  \if@twocolumn
    \onecolumn
    \@tempswatrue
  \else
    \@tempswafalse
  \fi
%%  \null\vfil
  \secdef\@part\@spart}
\renewcommand\@spart[1]{%
  {
    \interlinepenalty \@M
    \normalfont
    \markboth{#1}{#1}%               % <<<< GMZ
    \vspace*{\headlinerulesep}%
      \Huge \bfseries \sffamily #1   %<<<< statt huge
    \marginpar{%
      }%
    }%
  }%
\renewcommand\chaptermark[1]{\markboth {\uppercase{\ifnum
\c@secnumdepth>\m@ne
\qquad\HZdi\HZnumber{\thechapter}\@chapapp \quad \fi #1}}{\uppercase{\ifnum
\c@secnumdepth>\m@ne
 \HZdi\HZnumber{\thechapter}\@chapapp \quad \fi #1}}}
\renewcommand\sectionmark[1]{\markright{\uppercase{\ifnum \c@secnumdepth >\z@
 %\S
 \thesection\quad\fi #1\qquad\hspace*{1.5mm}}}}     %书眉字

%%
\renewcommand{\uppercase}{}
%%
\renewcommand{\@makechapterhead}[1]{%
  %%  \vspace*{50\p@}%
  {%
    \parindent \z@ \raggedright \normalfont
      \vspace*{\headlinerulesep}%
      \LARGE \bf \HZdi\HZnumber{\thechapter}\@chapapp{}\quad #1\par\nobreak
      \vspace*{\headlinerulesep}%
    \hrule
    \ifnum \c@secnumdepth >\m@ne
    {%
      \if@mainmatter
      {%
        %%    \vskip 20\p@
        }%
      \fi
      }%
    \fi
    \interlinepenalty\@M
    %%    \vskip 40\p@
    }%
  }%
\renewcommand{\@makeschapterhead}[1]{%
  {%
    \parindent \z@ \centering
    \normalfont
    \interlinepenalty\@M
      \vspace*{\headlinerulesep}%
      \LARGE \XHI #1\par\nobreak
    \marginpar{%
      }%
    %%    \vskip 40\p@
    }%
  }%
\renewcommand{\chapter}{%
  \clearpage
  \thispagestyle{plain}%
  \global\@topnum\z@
  \@afterindentfalse
  \secdef\@chapter\@schapter
  }%
%%
\numberwithin{equation}{chapter}%
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% User Interface
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%----------------------
%% Theorem environments:
%%----------------------
\newtheoremstyle{cplain}
  {0mm}   % ABOVESPACE
  {0mm}   % BELOWSPACE
  {\KAI}  % BODYFONT
  {}       % INDENT (empty value is the same as 0pt)
  {\bfseries} % HEADFONT
  {\ }         % HEADPUNCT
  {5pt plus 1pt minus 1pt} % HEADSPACE
  {{\thmname{#1}\thmnumber{ #2}\thmnote{\bf~(#3)}}}          % CUSTOM-HEAD-SPEC

\newtheoremstyle{cdefinition}
  {0mm}   % ABOVESPACE
  {0mm}   % BELOWSPACE
  {\normalfont}  % BODYFONT
  {}       % INDENT (empty value is the same as 0pt)
  {\bfseries} % HEADFONT
  {\ }         % HEADPUNCT
  {5pt plus 1pt minus 1pt} % HEADSPACE
  {{\thmname{#1}\thmnumber{ #2}\thmnote{\bf~(#3)}}}          % CUSTOM-HEAD-SPEC

%\theoremstyle{cplain}%
%\arabic{chapter}.\arabic{section}-\arabic{enumi}
%\renewcommand\thechapter{\arabic{chapter}.\arabic{section}-\arabic{enumi}}

\newlength{\lenoftwoh}    % 黑体两字长度
\settowidth{\lenoftwoh}{\bf\hspace*{0mm}证明}
\theoremstyle{cplain}%
\newtheorem{theorem}{\hspace{\lenoftwoh}定理}[chapter]%
\newtheorem{proposition}{\hspace{\lenoftwoh}性质}%
\newtheorem{lemma}[theorem]{\hspace{\lenoftwoh}引理}%
\newtheorem{corollary}[theorem]{\hspace{\lenoftwoh}推论}%
%\newtheorem{exe}[theorem]{\hspace{\lenoftwoh}习题}%
\newtheorem{assumption}[theorem]{\hspace{\lenoftwoh}假设}%
\newtheorem{notation}[theorem]{\hspace{\lenoftwoh}约定}%
\newtheorem{remark}[theorem]{\hspace{\lenoftwoh}说明}%
\newtheorem{Definition}{\hspace{\lenoftwoh}定义}[chapter]
\newtheorem{Theorem}{\hspace{\lenoftwoh}定理}[chapter]
\newtheorem{Lemma}{\hspace{\lenoftwoh}引理}[chapter]
\newtheorem{Proposition}{\hspace{\lenoftwoh}命题}[chapter]
\newtheorem{Corollary}{\hspace{\lenoftwoh}推论}[chapter]
\newtheorem{exa}{\hspace{\lenoftwoh}例}[chapter]
\newtheorem{exe}{\hspace{\lenoftwoh}练习}[chapter]
\newtheorem{exaa}{\hspace{\lenoftwoh}例}[chapter]

\newtheorem{Remark}{\hspace{\lenoftwoh}注}[chapter]

\theoremstyle{cdefinition}%
\newtheorem{example}{\hspace{\lenoftwoh}例}[section]%
\newtheorem{definition}[theorem]{\hspace{\lenoftwoh}定义}%
\newtheorem*{Note}{\hspace{\lenoftwoh}注}%
%\renewcommand{\solution}{\textbf{解}\quad }
\makeatletter

\makeatletter


\makeatother
\renewcommand{\proof}{\textbf{证明}\quad }

%%----------------------
%% Figure in the margin:
%%----------------------
\newcommand{\marginfigure}[2]{%
  \marginpar{%
    {\pushin #1}\\*[1mm]
    \XHI{\small\setlength{\baselineskip}{10pt}#2}%
    }%
  \ignorespaces%
  }%
%%----------------------
%% Figure in the margin:
%%----------------------
\newcommand{\bmarginfigure}[2]{%
  \marginpar{%
    \parbox[b]{\marginparwidth}{%
      \pushin #1\\*
      \textsf{#2}%
      }%
    }%
  \ignorespaces%
  }%
%%----------------------
%% Text in the margin:           <--- GMZ 2/26/98
%%----------------------
\newcommand{\margintext}[1]{%
  \marginpar{%
\setlength{\fboxsep}{0pt}\colorbox{textboxgray}{%  <<<<< grau hinterlegt!
    \setlength{\fboxsep}{2mm}%            <<<<<
    \fbox{%
     \parbox{\marginparwidth-2\fboxsep - 2\fboxrule}{\textrm{#1}}%
    }%
}%
   }%
  }%
%%---------------------
%% Figure in text body:
%%---------------------
\newcommand{\textfigure}[1]{%
  \par\addvspace{\bigskipamount}\noindent%
  \fbox{%
    \parbox{\textwidth - 2\fboxsep - 2\fboxrule}{\centering #1}%
    }%
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
  }%
%%---------------------
%% Figure in text body with comments on margin
%%---------------------
\newcommand{\textfigurewithtext}[2]{%
  \par\addvspace{\bigskipamount}\noindent%
%  \fbox{%
%    \parbox{\textwidth - 2\fboxsep - 2\fboxrule}{\centering #1}%
    \parbox{\textwidth}{\centering #1}%
%    }%
     \marginpar{%
                \ifodd\c@page
                    \parbox{\marginparwidth}{\small\XHI{#2}}%
                \else
                    \parbox{\marginparwidth}{\begin{flushright}\small\XHI{#2}\end{flushright}}%
                \fi
                }%
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
  }%
%%---------------------
%% Figure in text body with b-text in margin:
%%---------------------
\newcommand{\textfigurewithbtext}[2]{%
  \par\addvspace{\bigskipamount}\noindent%
  \fbox{%
    \parbox[b]{\textwidth - 2\fboxsep - 2\fboxrule}{\centering #1}%
    }%
  \marginpar{%
    \parbox[b]{\marginparwidth}{%
      \pushin \textsf{#2}%
      }%
    }%
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
  }%


%%----------------------
\newcommand{\textbox}[2]{%
  \par\addvspace{\bigskipamount}\noindent%
\setlength{\fboxsep}{0pt}\colorbox{textboxgray}{%  <<<<< grau hinterlegt!
  \begin{tabular*}{\textwidth}[c]{%
%     !{\vrule width \boxrule}@{\hspace{2\thmrule}}p{\boxwidth}@{\hspace{2\thmrule}}|%
      |@{\hspace{2\thmrule}}p{\boxwidth}@{\hspace{2\thmrule}}|%
      }%
    \hline%
    \mbox{}\\%
    \textsf{\bfseries\large #1}\\[-2mm]  %%          <<<<<[1ex]%
    #2\\%
%    \textit{#2}\\%   %<<<GMZ
    \mbox{}\\%
    \hline%
  \end{tabular*}%
}%
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
  }%
\newcommand{\stextbox}[1]{%
\renewcommand{\baselinestretch}{\factor}\selectfont
  \par\addvspace{\bigskipamount}\noindent%
\setlength{\fboxsep}{0pt}
{\KAI
  \begin{tabular*}{\textwidth}[c]{%
%     !{\vrule width \boxrule}@{\hspace{2\thmrule}}p{\boxwidth}@{\hspace{2\thmrule}}|%
      |@{\hspace{2\thmrule}}p{\boxwidth}@{\hspace{2\thmrule}}|%
      }%
    \hline%
    #1\\%
    \hline%
  \end{tabular*}%
}
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
\renewcommand{\baselinestretch}{\defaultfactor}\selectfont%
}%

\newcommand{\stextboxbottom}[1]{%
\renewcommand{\baselinestretch}{\factor}\selectfont
  \par\addvspace{\bigskipamount}\noindent%
\setlength{\fboxsep}{0pt}
{\KAI
  \begin{tabular*}{\textwidth}[c]{%
%     !{\vrule width \boxrule}@{\hspace{2\thmrule}}p{\boxwidth}@{\hspace{2\thmrule}}|%
      |@{\hspace{2\thmrule}}p{\boxwidth}@{\hspace{2\thmrule}}|%
      }%
    \hline%
    #1\\%
    %\hline%
  \end{tabular*}%
}
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
\renewcommand{\baselinestretch}{\defaultfactor}\selectfont%
}%

\newcommand{\stextboxtop}[1]{%
\renewcommand{\baselinestretch}{\factor}\selectfont
  \par\addvspace{\bigskipamount}\noindent%
\setlength{\fboxsep}{0pt}
{\KAI
  \begin{tabular*}{\textwidth}[c]{%
%     !{\vrule width \boxrule}@{\hspace{2\thmrule}}p{\boxwidth}@{\hspace{2\thmrule}}|%
      |@{\hspace{2\thmrule}}p{\boxwidth}@{\hspace{2\thmrule}}|%
      }%
    %\hline%
    #1\\%
    \hline%
  \end{tabular*}%
}
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
\renewcommand{\baselinestretch}{\defaultfactor}\selectfont%
}%

%%----------------------
%% Framed result in text body:
%%----------------------
\newcommand{\textresultold}[1]{%
  \par\addvspace{\bigskipamount}\noindent%
\setlength{\fboxsep}{0pt}\colorbox{textboxgray}{%  <<<<< grau hinterlegt!
\color{EWOMgray}
     \begin{tabular*}{\textwidth}[c]{%
      !{\vrule width
        \thmrule}@{\hspace{2\thmrule}}p{\thmwidth}@{\hspace{2\thmrule}}|%
      }%
    \hline%
    \mbox{}\\[-2mm]%
%%%    \textbf{\large #1}\\[2ex]%
\color{black}#1\color{EWOMgray}\\[2ex]%       <<<<<<<<<
%%%    \textbf{Proof.} #3\\%
%    \mbox{}\\%
    \hline%
  \end{tabular*}%
}%
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
    \normalcolor%
  }%
%%----------------------
%% Framed result in text body:
%%----------------------
\newcommand{\textresult}[1]{%
\renewcommand{\baselinestretch}{\factor}\selectfont
  \par\addvspace{\bigskipamount}\noindent%
\setlength{\fboxsep}{0pt}\colorbox{textboxgray}{%  <<<<< grau hinterlegt!
\color{EWOMgray}
     \begin{tabular*}{\textwidth}[c]{%
      !{\vrule width
        \thmrule}@{\hspace{2\thmrule}}p{\thmwidth}@{\hspace{2\thmrule}}%
      }%
%    \hline%
    \mbox{}\\[-4mm]%
%%%    \textbf{\large #1}\\[2ex]%
%\color{black}\it#1\color{EWOMgray}\\[2ex]%       <<<<<<<<<
\color{black}\KAI#1\color{black}\\[2ex]%       <<<<<<<<<
%%%    \textbf{Proof.} #3\\%
%    \mbox{}\\%
%    \hline%
  \end{tabular*}%
}%
  \par\addvspace{\bigskipamount}%
  \ignorespaces%
    \normalcolor%
\renewcommand{\baselinestretch}{\defaultfactor}\selectfont
  }%
%%---------------------
%% Figure on part page:
%%---------------------
\newcommand{\partfigure}[1]{%
    \fbox{%
      \parbox[t][\partpageheight - 2\fboxsep - 2\fboxrule][c]{%
        \textwidth - 2\fboxsep - 2\fboxrule}{%
        \centering #1
        }%
      }%
  \ignorespaces%
  }%
%%-----------------------------------------
%% Entry in table of contents on part page:
%%-----------------------------------------
\newcommand{\parttocentry}[2]{%
  \stepcounter{parttocchp}%
  \par\nobreak\addvspace{\medskipamount}\noindent%
  \textbf{\sffamily\arabic{parttocchp}}\\*#1~\enspace\textit{\pageref{#2}}%
}%
\newcounter{parttocchp}%
%%--------------------------------
%% Table of contents on part page:
%%--------------------------------
\newcommand{\parttoc}[1]{%
  \marginpar{\vspace{-4mm}%
%    \setcounter{parttocchp}{0}%
%    \textbf{\sffamily\contentsname}%
    #1%
   \vspace*{\fill}%
   %%% {\it``#2''}}%
  }}%
%%
%%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "ProofsFromTheBook_example.tex"
%%% End:
